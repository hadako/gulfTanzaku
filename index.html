<!doctype html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<meta name="description" content="Gulf短冊メーカー">
	<meta name="viewport" content="width=device-width">
	<title>Gulf短冊メーカー | GulfKanawutJFC</title>
	<link rel="stylesheet" media="all" href="css/style.css">
</head>
<body onload="loadImage('preview')">
  <div textAlign="center">
    <p>ガルフ短冊メーカー技術確認</p>
    <p><canvas id="preview"></canvas></p>
    <p>
      <input type="text" id="canvas_text" value="ガルフカナウットトライピパタナポン">
      <button onclick="drawText('preview', 'canvas_text');">入力</button>
    </p>
  </div>

  <script>
  //キャンバスに画像を描画する　
  function loadImage(id)
  {
  	//画像を読み込んでImageオブジェクトを作成する
  	var image = new Image();
  	image.src = 'img/test.jpeg';
  	image.onload = (function () {
  		//画像ロードが完了してからキャンバスの準備をする
  		var canvas = document.getElementById(id);
  		var ctx = canvas.getContext('2d');
  		//キャンバスのサイズを画像サイズに合わせる
  		canvas.width = image.width;
  		canvas.height = image.height;
  		//キャンバスに画像を描画（開始位置0,0）
  		ctx.drawImage(image, 0, 0);
  	});
  }
  //キャンバスに文字を描く
  function drawText(canvas_id, text_id)
  {
  	var canvas = document.getElementById(canvas_id);
  	var ctx = canvas.getContext('2d');
  	var text = document.getElementById(text_id);
  	//文字のスタイルを指定
  	ctx.font = '40px sans-s';
  	ctx.fillStyle = '#FFFFFF'; //文字色
  	//文字の配置を指定（左上基準にしたければtop/leftだが、文字の中心座標を指定するのでcenter
  	ctx.textBaseline = 'center';
  	ctx.textAlign = 'center';
  	//座標を指定して文字を描く（座標は画像の中心に）

  	var x = (canvas.width / 2);
  	var y = (canvas.height / 2);
ctx.fillText(text.value, x, y);
		//tategaki(ctx,text,x,y)

	};

	function tategaki(context, text, x, y) {
	//var textList = text.split('\n');
	var textList = text
	var lineHeight = context.measureText("あ").width;
	textList.forEach(function(elm, i) {
		Array.prototype.forEach.call(elm, function(ch, j) {
			context.fillText(ch, x-lineHeight*i, y+lineHeight*j);
		});
	});
  }


  </script>



</body>
</html>
